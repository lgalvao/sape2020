{"remainingRequest":"/Users/leonardo/sape2020/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/leonardo/sape2020/src/views/VisaoZonasFila.vue?vue&type=style&index=0&id=1a77d76f&scoped=true&lang=css&","dependencies":[{"path":"/Users/leonardo/sape2020/src/views/VisaoZonasFila.vue","mtime":1598581088056},{"path":"/Users/leonardo/sape2020/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/leonardo/sape2020/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/leonardo/sape2020/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/leonardo/sape2020/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/leonardo/sape2020/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLmZhaXhhLWluZm9ybWFjb2VzIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDQ1LCAxMzksIDApOw0KICBmb250LXNpemU6IGNhbGMoN3B4ICsgMS4xdm1pbik7DQogIHBhZGRpbmc6IDAuM3ZtaW47DQogIGNvbG9yOiB3aGl0ZTsNCn0NCg0KI2xpc3RhLXpvbmFzIHsNCiAgcGFkZGluZy10b3A6IGNhbGMoMSAqICgxdncgKyAxdmggLSAxdm1pbikpOw0KICBwYWRkaW5nLWxlZnQ6IGNhbGMoMS41ICogKDF2dyArIDF2aCAtIDF2bWluKSk7DQogIGhlaWdodDogMTAwJQ0KfQ0K"},{"version":3,"sources":["VisaoZonasFila.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+IA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"VisaoZonasFila.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div>\r\n    <b-container fluid=\"true\">\r\n      <b-row align-v=\"start\">\r\n        <navegacao/>\r\n      </b-row>\r\n\r\n      <b-row class=\"faixa-informacoes\" style=\"width:100vw; padding-left: 1.8vw\" align-h=\"center\">\r\n        <div>{{ estatisticas }}</div>\r\n      </b-row>\r\n\r\n      <b-row id=\"lista-zonas\">\r\n        <visao-zonas-item v-for=\"zona in zonasOrdenado\" :key=\"zona.numero\" :zona=\"zona\"\r\n                          @zona-clicada=\"mostrarDetalhesZona(zona.numero)\"/>\r\n      </b-row>\r\n\r\n      <b-row id=\"legenda\">\r\n        <legenda/>\r\n      </b-row>\r\n\r\n      <visao-zonas-modal :zona=\"this.zonas[this.zonaSelecionada]\"/>\r\n    </b-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapActions, mapGetters, mapMutations, mapState} from 'vuex'\r\nimport * as tipos from '../store/mutationtypes'\r\n\r\nimport Navegacao from '../componentes/Navegacao'\r\nimport Legenda from '../componentes/Legenda'\r\nimport lodash from 'lodash'\r\n\r\nconst VisaoZonasModal = () => import('../componentes/ModalZonas.vue');\r\nconst VisaoZonasItem = () => import('../componentes/ZonaItem.vue');\r\n\r\nexport default {\r\n  name: 'VisaoZonasFila',\r\n  components: {\r\n    Legenda,\r\n    Navegacao,\r\n    VisaoZonasModal,\r\n    VisaoZonasItem\r\n  },\r\n  data() {\r\n    return {\r\n      zonaSelecionada: '1'\r\n    }\r\n  },\r\n  beforeRouteEnter(to, from, next) {\r\n    next(vm => {\r\n      vm.atualizarVisao(to.name);\r\n      vm.atualizarPoloSelecionado(0);\r\n      vm.atualizarPolling()\r\n    })\r\n  },\r\n  computed: {\r\n    ...mapState({\r\n      zonas: state => state.zonas,\r\n      etapa: state => state.etapa,\r\n      fila: state => state.fila\r\n    }),\r\n    ...mapGetters({\r\n      andamentos: 'getAndamentos'\r\n    }),\r\n    estatisticas() {\r\n      if (this.etapa === 3) {\r\n        return 'Liberadas: ' + this.liberadas\r\n      } else {\r\n        return 'Liberadas hoje: ' + this.liberadas + ' de ' + this.zonasOrdenado.length + ' ' + this.percentualLiberadas\r\n      }\r\n    },\r\n    zonasOrdenado() {\r\n      const saida = [];\r\n\r\n      for (let i = 0; i < this.fila.length; i++) {\r\n        const numZona = this.fila[i].zona;\r\n        saida[i] = this.zonasArray.find(z => (z.numero === numZona))\r\n      }\r\n      for (let i = 0; i < this.zonasArray.length; i++) {\r\n        if (this.zonasArray[i].situacaoVerificacao === 'ATIVA') {\r\n          if (!saida.find(z => z.numero === this.zonasArray[i].numero)) {\r\n            saida.push(this.zonasArray[i])\r\n          }\r\n        }\r\n      }\r\n      return lodash.orderBy(saida,\r\n          ['situacaoVerificacao', 'andamento', 'pendencias.length', 'percRealizado'], ['asc', 'asc', 'desc', 'asc'])\r\n    },\r\n    zonasArray() {\r\n      return Object.values(this.zonas)\r\n    },\r\n    percentualLiberadas() {\r\n      if (this.zonasOrdenado.length === 0) return '';\r\n      return '(' + (this.liberadas / this.zonasOrdenado.length * 100).toFixed() + '%)'\r\n    },\r\n    titulo() {\r\n      return this.zonaSelecionada + ' - ' +\r\n          this.zonas[this.zonaSelecionada].municipioSede\r\n    },\r\n    liberadas() {\r\n      let liberadas = 0;\r\n      const andamentoMaximo = this.andamentos[this.andamentos.length - 1].numero;\r\n      for (const zona of this.zonasOrdenado) {\r\n        if (zona.andamento === andamentoMaximo) {\r\n          liberadas++\r\n        }\r\n      }\r\n      return liberadas\r\n    },\r\n    itensRestantes() {\r\n      let itensRestantes = 0;\r\n      for (const zona in this.zonas) {\r\n        itensRestantes += this.zonas[zona].itensRestantes\r\n      }\r\n      return itensRestantes\r\n    },\r\n    itensTotais() {\r\n      let itensTotais = 0;\r\n      for (const zona in this.zonas) {\r\n        itensTotais += this.zonas[zona].itensTotais\r\n      }\r\n      return itensTotais\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions([\r\n      'atualizarPolling'\r\n    ]),\r\n    ...mapMutations({\r\n      atualizarVisao: tipos.ATUALIZAR_VISAO,\r\n      atualizarPoloSelecionado: tipos.ATUALIZAR_POLO_SELECIONADO,\r\n      mostrarModal: tipos.MOSTRAR_MODAL_ZONA\r\n    }),\r\n    mostrarDetalhesZona(numZona) {\r\n      this.mostrarModal(true);\r\n      this.zonaSelecionada = numZona\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.faixa-informacoes {\r\n  background-color: rgb(45, 139, 0);\r\n  font-size: calc(7px + 1.1vmin);\r\n  padding: 0.3vmin;\r\n  color: white;\r\n}\r\n\r\n#lista-zonas {\r\n  padding-top: calc(1 * (1vw + 1vh - 1vmin));\r\n  padding-left: calc(1.5 * (1vw + 1vh - 1vmin));\r\n  height: 100%\r\n}\r\n</style>\r\n"]}]}