{"remainingRequest":"/Users/leonardo/sape2020/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/leonardo/sape2020/src/componentes/ModalPolos.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/leonardo/sape2020/src/componentes/ModalPolos.vue","mtime":1598581088265},{"path":"/Users/leonardo/sape2020/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/leonardo/sape2020/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/leonardo/sape2020/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgSXRlbUluZm9Nb2RhbCBmcm9tICcuL0l0ZW1JbmZvTW9kYWwnDQppbXBvcnQge21hcEdldHRlcnMsIG1hcE11dGF0aW9ucywgbWFwU3RhdGV9IGZyb20gJ3Z1ZXgnDQppbXBvcnQgKiBhcyB0aXBvcyBmcm9tICcuLi9zdG9yZS9tdXRhdGlvbnR5cGVzJw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdNb2RhbFBvbG9zJywNCiAgY29tcG9uZW50czoge0l0ZW1JbmZvTW9kYWx9LA0KICBwcm9wczogew0KICAgIHBvbG86IHsNCiAgICAgIG51bWVybzogMSwNCiAgICAgIGFuZGFtZW50bzogMSwNCiAgICAgIG11bmljaXBpb1NlZGU6ICcnLA0KICAgICAgc2l0dWFjYW9WZXJpZmljYWNhbzogJ0FUSVZPJywNCiAgICAgIHBlbmRlbmNpYXM6IFt7DQogICAgICAgIGNvZGlnbzogJycsDQogICAgICAgIGRlc2NyaWNhbzogJycsDQogICAgICAgIGRldGFsaGFtZW50bzogJycNCiAgICAgIH1dLA0KICAgICAgZGF0YVVsdGltYUF0dWFsaXphY2FvOiAnJywNCiAgICAgIHBlcmNSZWFsaXphZG86IDAsDQogICAgICBpdGVuc1Jlc3RhbnRlczogMSwNCiAgICAgIGl0ZW5zVG90YWlzOiAxLA0KICAgICAgc3RzOiBbXQ0KICAgIH0NCiAgfSwNCiAgY29tcHV0ZWQ6IHsNCiAgICAuLi5tYXBHZXR0ZXJzKHsNCiAgICAgIGFuZGFtZW50b3M6ICdnZXRBbmRhbWVudG9zJywNCiAgICAgIGRlc2NBbmRhbWVudG86ICdnZXREZXNjQW5kYW1lbnRvJywNCiAgICAgIHpvbmFzOiAnZ2V0Wm9uYXNBcnJheScNCiAgICB9KSwNCiAgICAuLi5tYXBTdGF0ZSh7DQogICAgICBfbW9zdHJhck1vZGFsOiBzdGF0ZSA9PiBzdGF0ZS5tb3N0cmFyTW9kYWxQb2xvDQogICAgfSksDQogICAgbW9zdHJhck1vZGFsOiB7DQogICAgICBnZXQoKSB7DQogICAgICAgIHJldHVybiB0aGlzLl9tb3N0cmFyTW9kYWwNCiAgICAgIH0sDQogICAgICBzZXQodmFsb3IpIHsNCiAgICAgICAgdGhpcy5hdHVhbGl6YXJNb3N0cmFyTW9kYWwodmFsb3IpDQogICAgICB9DQogICAgfSwNCiAgICB6b25hc1BvbG8oKSB7DQogICAgICByZXR1cm4gdGhpcy56b25hcy5maWx0ZXIoem9uYSA9PiB6b25hLm51bVBvbG8gPT09IHRoaXMucG9sby5udW1lcm8pDQogICAgfSwNCiAgICBzdHMoKSB7DQogICAgICByZXR1cm4gdGhpcy5wb2xvLnN0cw0KICAgIH0sDQogICAgdGl0dWxvKCkgew0KICAgICAgaWYgKCF0aGlzLnBvbG8pIHsNCiAgICAgICAgcmV0dXJuICcnDQogICAgICB9DQogICAgICByZXR1cm4gJ1BvbG8gJyArDQogICAgICAgICAgdGhpcy5udW1Qb2xvRm9ybWF0YWRvICsgJyAtICcgKyB0aGlzLnBvbG8ubXVuaWNpcGlvU2VkZQ0KICAgIH0sDQogICAgLyogVE9ETyB1c2FyIGZvcm1hdGHDp8OjbyBuYXRpdmEgbm8gSlMgKi8NCiAgICBudW1Qb2xvRm9ybWF0YWRvKCkgew0KICAgICAgaWYgKHRoaXMucG9sbykgew0KICAgICAgICBjb25zdCBzID0gJzAwJyArIHRoaXMucG9sby5udW1lcm87DQogICAgICAgIHJldHVybiBzLnN1YnN0cihzLmxlbmd0aCAtIDIpDQogICAgICB9IGVsc2UgcmV0dXJuICcwMScNCiAgICB9LA0KICAgIGl0ZW5zUmVhbGl6YWRvcygpIHsNCiAgICAgIHJldHVybiB0aGlzLnBvbG8uaXRlbnNUb3RhaXMgLSB0aGlzLnBvbG8uaXRlbnNSZXN0YW50ZXMNCiAgICB9LA0KICAgIGNhbXBvc1RhYmVsYVBlbmRlbmNpYXMoKSB7DQogICAgICByZXR1cm4gew0KICAgICAgICBmaWVsZHM6IFsNCiAgICAgICAgICB7DQogICAgICAgICAgICBrZXk6ICdjb2RpZ28nLA0KICAgICAgICAgICAgbGFiZWw6ICdDw7NkaWdvJw0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAga2V5OiAnZGVzY3JpY2FvJywNCiAgICAgICAgICAgIGxhYmVsOiAnRGVzY3Jpw6fDo28nDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBrZXk6ICdkZXRhbGhhbWVudG8nLA0KICAgICAgICAgICAgbGFiZWw6ICdEZXRhbGhhbWVudG8nDQogICAgICAgICAgfQ0KICAgICAgICBdDQogICAgICB9DQogICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgLi4ubWFwTXV0YXRpb25zKHsNCiAgICAgIGF0dWFsaXphck1vc3RyYXJNb2RhbDogdGlwb3MuTU9TVFJBUl9NT0RBTF9QT0xPDQogICAgfSkNCiAgfQ0KfQ0K"},{"version":3,"sources":["ModalPolos.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsDA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ModalPolos.vue","sourceRoot":"src/componentes","sourcesContent":["<template>\r\n  <b-modal v-model=\"mostrarModal\" :title=\"titulo\"\r\n           class=\"modal-polos\"\r\n           hide-footer header-bg-variant=\"dark\"\r\n           header-text-variant=\"light\" size=\"lg\">\r\n    <div class=\"secao\">Zonas</div>\r\n\r\n    <item-info-modal>\r\n        <span v-for=\"(item, index) in zonasPolo\" :key=\"item.numero\">\r\n                {{ item.numero }}<span v-if=\"index !== zonasPolo.length-1\">,</span>\r\n        </span>\r\n    </item-info-modal>\r\n\r\n    <div class=\"secao\">Situação</div>\r\n\r\n    <item-info-modal>\r\n      Progresso: {{ polo.percRealizado }}% ({{ itensRealizados }} de {{ polo.itensTotais }})\r\n      <b-progress class=\"barra-progresso\" :max=polo.itensTotais>\r\n        <b-progress-bar :value=\"itensRealizados\" variant=\"success\" animated></b-progress-bar>\r\n      </b-progress>\r\n    </item-info-modal>\r\n\r\n    <item-info-modal>\r\n      Andamento {{ polo.andamento }} - {{ descAndamento(polo.andamento) }}\r\n    </item-info-modal>\r\n\r\n    <item-info-modal>\r\n      Período de realização: {{ polo.periodoEtapa }}\r\n    </item-info-modal>\r\n\r\n    <div class=\"secao\">Suporte Tecnológico</div>\r\n    <b-table :items=\"sts\" small thead-class=\"sem-cabecalho\"></b-table>\r\n\r\n    <div class=\"secao\">Pendências</div>\r\n\r\n    <div v-if=\"!polo.pendencias.length\">\r\n      <item-info-modal>Sem pendências</item-info-modal>\r\n    </div>\r\n\r\n    <!-- TODO Resolver a questão da codificação já no servidor. -->\r\n    <div v-show=\"polo.pendencias.length\">\r\n      <b-list-group>\r\n        <b-list-group-item v-for=\"pendencia in polo.pendencias\" :key=\"pendencia.codigo\">\r\n          <strong>{{ pendencia.descricao }}</strong> (cód. {{ pendencia.codigo }}) <br/>\r\n          <li v-for=\"item in pendencia.detalhamento.split('|')\" :key=\"item\">\r\n            {{ item.replace(/i¿½i¿½/, \"çã\") }}\r\n          </li>\r\n        </b-list-group-item>\r\n      </b-list-group>\r\n    </div>\r\n  </b-modal>\r\n</template>\r\n\r\n<script>\r\nimport ItemInfoModal from './ItemInfoModal'\r\nimport {mapGetters, mapMutations, mapState} from 'vuex'\r\nimport * as tipos from '../store/mutationtypes'\r\n\r\nexport default {\r\n  name: 'ModalPolos',\r\n  components: {ItemInfoModal},\r\n  props: {\r\n    polo: {\r\n      numero: 1,\r\n      andamento: 1,\r\n      municipioSede: '',\r\n      situacaoVerificacao: 'ATIVO',\r\n      pendencias: [{\r\n        codigo: '',\r\n        descricao: '',\r\n        detalhamento: ''\r\n      }],\r\n      dataUltimaAtualizacao: '',\r\n      percRealizado: 0,\r\n      itensRestantes: 1,\r\n      itensTotais: 1,\r\n      sts: []\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters({\r\n      andamentos: 'getAndamentos',\r\n      descAndamento: 'getDescAndamento',\r\n      zonas: 'getZonasArray'\r\n    }),\r\n    ...mapState({\r\n      _mostrarModal: state => state.mostrarModalPolo\r\n    }),\r\n    mostrarModal: {\r\n      get() {\r\n        return this._mostrarModal\r\n      },\r\n      set(valor) {\r\n        this.atualizarMostrarModal(valor)\r\n      }\r\n    },\r\n    zonasPolo() {\r\n      return this.zonas.filter(zona => zona.numPolo === this.polo.numero)\r\n    },\r\n    sts() {\r\n      return this.polo.sts\r\n    },\r\n    titulo() {\r\n      if (!this.polo) {\r\n        return ''\r\n      }\r\n      return 'Polo ' +\r\n          this.numPoloFormatado + ' - ' + this.polo.municipioSede\r\n    },\r\n    /* TODO usar formatação nativa no JS */\r\n    numPoloFormatado() {\r\n      if (this.polo) {\r\n        const s = '00' + this.polo.numero;\r\n        return s.substr(s.length - 2)\r\n      } else return '01'\r\n    },\r\n    itensRealizados() {\r\n      return this.polo.itensTotais - this.polo.itensRestantes\r\n    },\r\n    camposTabelaPendencias() {\r\n      return {\r\n        fields: [\r\n          {\r\n            key: 'codigo',\r\n            label: 'Código'\r\n          },\r\n          {\r\n            key: 'descricao',\r\n            label: 'Descrição'\r\n          },\r\n          {\r\n            key: 'detalhamento',\r\n            label: 'Detalhamento'\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapMutations({\r\n      atualizarMostrarModal: tipos.MOSTRAR_MODAL_POLO\r\n    })\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.modal-polos {\r\n  font-family: \"Roboto Condensed\", sans-serif;\r\n}\r\n\r\n.secao {\r\n  font-weight: bold;\r\n  margin-top: 7px;\r\n}\r\n\r\n.barra-progresso {\r\n  height: 25px;\r\n}\r\n</style>\r\n"]}]}