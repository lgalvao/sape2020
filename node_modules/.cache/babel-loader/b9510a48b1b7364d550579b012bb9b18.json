{"remainingRequest":"D:\\sape2020\\node_modules\\thread-loader\\dist\\cjs.js!D:\\sape2020\\node_modules\\babel-loader\\lib\\index.js!D:\\sape2020\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\sape2020\\src\\store\\actions.js","dependencies":[{"path":"D:\\sape2020\\src\\store\\actions.js","mtime":1540753269873},{"path":"D:\\sape2020\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\sape2020\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\sape2020\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\sape2020\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import axios from \"axios\";\nimport router from \"../router\";\nimport * as tipos from \"../store/mutationtypes\";\nexport default {\n  obterEleicao: function obterEleicao(_ref) {\n    var commit = _ref.commit,\n        state = _ref.state,\n        dispatch = _ref.dispatch;\n    return new Promise(function (resolve) {\n      axios.get(\"\".concat(state.url, \"/eleicao\")).then(function (response) {\n        resolve(response);\n        commit(tipos.ATUALIZAR_NOME_ELEICAO, response.data.nome);\n        commit(tipos.ATUALIZAR_ETAPA, response.data.etapaAtual);\n        dispatch('inicializarDados');\n      });\n    });\n  },\n  obterFila: function obterFila(_ref2) {\n    var commit = _ref2.commit,\n        state = _ref2.state;\n    return new Promise(function (resolve) {\n      axios.get(\"\".concat(state.url, \"/estat-conferencia?etapa=\").concat(state.etapa)).then(function (response) {\n        resolve(response);\n        commit(tipos.ATUALIZAR_FILA, response.data);\n      });\n    });\n  },\n  obterAndamentosZonas: function obterAndamentosZonas(_ref3) {\n    var commit = _ref3.commit,\n        state = _ref3.state;\n    return new Promise(function (resolve) {\n      axios.get(\"\".concat(state.url, \"/andamentos-zonas?etapa=\").concat(state.etapa)).then(function (response) {\n        resolve(response);\n        commit(tipos.ATUALIZAR_ANDAMENTOS_ZONAS, response.data);\n      });\n    });\n  },\n  obterAndamentosPolos: function obterAndamentosPolos(_ref4) {\n    var commit = _ref4.commit,\n        state = _ref4.state;\n    return new Promise(function (resolve) {\n      axios.get(\"\".concat(state.url, \"/andamentos-polos?etapa=\").concat(state.etapa)).then(function (response) {\n        resolve(response);\n        commit(tipos.ATUALIZAR_ANDAMENTOS_POLOS, response.data);\n      });\n    });\n  },\n  obterAndamentosMunicipios: function obterAndamentosMunicipios(_ref5) {\n    var commit = _ref5.commit,\n        state = _ref5.state;\n    return new Promise(function (resolve) {\n      axios.get(\"\".concat(state.url, \"/andamentos-municipios?etapa=\").concat(state.etapa)).then(function (response) {\n        resolve(response);\n        commit(tipos.ATUALIZAR_ANDAMENTOS_MUNICIPIOS, response.data);\n      });\n    });\n  },\n  obterZonasRest: function obterZonasRest(_ref6) {\n    var commit = _ref6.commit,\n        state = _ref6.state;\n    return new Promise(function (resolve, reject) {\n      var fake = state.testeAndamentos ? '-fake' : '';\n      axios.get(\"\".concat(state.url, \"/zonas\").concat(fake, \"?etapa=\").concat(state.etapa)).then(function (response) {\n        resolve(response.data);\n        commit(tipos.ATUALIZAR_ZONAS, response.data);\n      }).catch(function (error) {\n        return reject(error);\n      });\n    });\n  },\n  obterPolosRest: function obterPolosRest(_ref7) {\n    var commit = _ref7.commit,\n        state = _ref7.state;\n    return new Promise(function (resolve, reject) {\n      var fake = state.testeAndamentos ? '-fake' : '';\n      axios.get(\"\".concat(state.url, \"/polos\").concat(fake, \"?etapa=\").concat(state.etapa)).then(function (response) {\n        resolve(response.data);\n        commit(tipos.ATUALIZAR_POLOS, response.data);\n      }).catch(function (error) {\n        return reject(error);\n      });\n    });\n  },\n  obterMunicipiosRest: function obterMunicipiosRest(_ref8) {\n    var commit = _ref8.commit,\n        state = _ref8.state;\n    return new Promise(function (resolve, reject) {\n      var fake = state.testeAndamentos ? '-fake' : '';\n      axios.get(\"\".concat(state.url, \"/municipios\").concat(fake, \"?etapa=\").concat(state.etapa)).then(function (response) {\n        resolve(response.data);\n        commit(tipos.ATUALIZAR_MUNICIPIOS, response.data);\n      }).catch(function (error) {\n        return reject(error);\n      });\n    });\n  },\n  obterDataAtualizacao: function obterDataAtualizacao(_ref9) {\n    var commit = _ref9.commit,\n        state = _ref9.state;\n    return new Promise(function (resolve, reject) {\n      axios.get(\"\".concat(state.url, \"/etapa?etapa=\").concat(state.etapa)).then(function (response) {\n        resolve(response.data);\n\n        if (response.data.dataAtualizacao === state.dataUltimaAtualizacao) {\n          commit(tipos.ATUALIZAR_CICLOS, state.ciclos + 1);\n        } else {\n          commit(tipos.ATUALIZAR_CICLOS, 0);\n        }\n\n        commit(tipos.ATUALIZAR_NOME_ETAPA, response.data.descricao);\n        commit(tipos.ATUALIZAR_DATA_ATUALIZACAO, response.data.dataAtualizacao);\n      }).catch(function (error) {\n        return reject(error);\n      });\n    });\n  },\n  inicializarDados: function inicializarDados(_ref10) {\n    var dispatch = _ref10.dispatch;\n    return new Promise(function (resolve) {\n      dispatch('obterDataAtualizacao');\n      dispatch('obterAndamentosZonas');\n      dispatch('obterZonasRest');\n      dispatch('obterFila');\n      dispatch('obterAndamentosPolos');\n      dispatch('obterPolosRest');\n      dispatch('obterAndamentosMunicipios');\n      dispatch('obterMunicipiosRest');\n      resolve();\n    });\n  },\n  atualizarEtapaRest: function atualizarEtapaRest(_ref11, etapa) {\n    var dispatch = _ref11.dispatch,\n        commit = _ref11.commit;\n    return new Promise(function (resolve) {\n      resolve();\n      commit(tipos.ATUALIZAR_ETAPA, etapa);\n      dispatch('atualizarPolling');\n    });\n  },\n  atualizarPolling: function atualizarPolling(_ref12) {\n    var state = _ref12.state,\n        dispatch = _ref12.dispatch,\n        commit = _ref12.commit,\n        getters = _ref12.getters;\n    commit(tipos.ZERAR_INTERVALOS);\n    dispatch('inicializarDados');\n    var intData = setInterval(function () {\n      dispatch('obterDataAtualizacao');\n    }.bind(this), state.tempoAtualizacao);\n    commit(tipos.ATUALIZAR_INT_DATA, intData);\n\n    if (state.visao === tipos.VISAO_FILA) {\n      var intFila = setInterval(function () {\n        dispatch('obterFila');\n        dispatch('obterZonasRest');\n      }.bind(this), state.tempoAtualizacao);\n      commit(tipos.ATUALIZAR_INT_FILA, intFila);\n    }\n\n    if (state.visao === tipos.VISAO_ZONAS || state.visao === tipos.VISAO_ZONASFILA || state.visao === tipos.VISAO_CONFERENCIA) {\n      var intZonas = setInterval(function () {\n        dispatch('obterAndamentosZonas');\n        dispatch('obterFila');\n        dispatch('obterZonasRest');\n      }.bind(this), state.tempoAtualizacao);\n      commit(tipos.ATUALIZAR_INT_ZONAS, intZonas);\n    }\n\n    if (state.visao === tipos.VISAO_ZONASPOLO) {\n      var intZonasPolo = setInterval(function () {\n        dispatch('obterZonasRest');\n        dispatch('obterAndamentosZonas');\n        dispatch('obterPolosRest');\n        dispatch('obterAndamentosPolos');\n      }.bind(this), state.tempoAtualizacao);\n      commit(tipos.ATUALIZAR_INT_ZONAS_POLOS, intZonasPolo);\n    }\n\n    if (state.visao === tipos.VISAO_POLOS) {\n      var intPolos = setInterval(function () {\n        dispatch('obterAndamentosPolos');\n        dispatch('obterPolosRest');\n      }.bind(this), state.tempoAtualizacao);\n      commit(tipos.ATUALIZAR_INT_POLOS, intPolos);\n    }\n\n    if (state.visao === tipos.VISAO_MUNICIPIOS) {\n      var intMunicipios = setInterval(function () {\n        dispatch('obterMunicipiosRest');\n      }.bind(this), state.tempoAtualizacao);\n      commit(tipos.ATUALIZAR_INT_MUNICIPIOS, intMunicipios);\n    }\n\n    if (state.alternarEtapas) {\n      var intAlternancia = setInterval(function () {\n        var etapa = state.etapa;\n\n        if (etapa === 1 && !getters.getModalExibido) {\n          dispatch('atualizarEtapaRest', 2);\n        } else if (etapa === 2 && !getters.getModalExibido) {\n          dispatch('atualizarEtapaRest', 1);\n        }\n      }.bind(this), state.tempoAtualizacao * 2);\n      commit(tipos.ATUALIZAR_INT_ALTERNANCIA, intAlternancia);\n    }\n\n    if (state.modoTelao && state.visao !== tipos.VISAO_CONFIGURACAO) {\n      var intTelao = setInterval(function () {\n        var visao = state.visao;\n\n        if (visao === tipos.VISAO_ZONAS && !getters.getModalExibido) {\n          router.push({\n            name: tipos.VISAO_POLOS\n          });\n        } else if (visao === tipos.VISAO_POLOS && !getters.getModalExibido) {\n          router.push({\n            name: tipos.VISAO_MUNICIPIOS\n          });\n        } else if (visao === tipos.VISAO_MUNICIPIOS && !getters.getModalExibido) {\n          router.push({\n            name: tipos.VISAO_ZONAS\n          });\n        }\n      }.bind(this), state.tempoAtualizacao * 2);\n      commit(tipos.ATUALIZAR_INT_TELAO, intTelao);\n    }\n  }\n};",{"version":3,"sources":["D:/sape2020/src/store/actions.js"],"names":["axios","router","tipos","obterEleicao","commit","state","dispatch","Promise","resolve","get","url","then","response","ATUALIZAR_NOME_ELEICAO","data","nome","ATUALIZAR_ETAPA","etapaAtual","obterFila","etapa","ATUALIZAR_FILA","obterAndamentosZonas","ATUALIZAR_ANDAMENTOS_ZONAS","obterAndamentosPolos","ATUALIZAR_ANDAMENTOS_POLOS","obterAndamentosMunicipios","ATUALIZAR_ANDAMENTOS_MUNICIPIOS","obterZonasRest","reject","fake","testeAndamentos","ATUALIZAR_ZONAS","catch","error","obterPolosRest","ATUALIZAR_POLOS","obterMunicipiosRest","ATUALIZAR_MUNICIPIOS","obterDataAtualizacao","dataAtualizacao","dataUltimaAtualizacao","ATUALIZAR_CICLOS","ciclos","ATUALIZAR_NOME_ETAPA","descricao","ATUALIZAR_DATA_ATUALIZACAO","inicializarDados","atualizarEtapaRest","atualizarPolling","getters","ZERAR_INTERVALOS","intData","setInterval","bind","tempoAtualizacao","ATUALIZAR_INT_DATA","visao","VISAO_FILA","intFila","ATUALIZAR_INT_FILA","VISAO_ZONAS","VISAO_ZONASFILA","VISAO_CONFERENCIA","intZonas","ATUALIZAR_INT_ZONAS","VISAO_ZONASPOLO","intZonasPolo","ATUALIZAR_INT_ZONAS_POLOS","VISAO_POLOS","intPolos","ATUALIZAR_INT_POLOS","VISAO_MUNICIPIOS","intMunicipios","ATUALIZAR_INT_MUNICIPIOS","alternarEtapas","intAlternancia","getModalExibido","ATUALIZAR_INT_ALTERNANCIA","modoTelao","VISAO_CONFIGURACAO","intTelao","push","name","ATUALIZAR_INT_TELAO"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP;AACA,OAAO,KAAKC,KAAZ;AAEA,eAAe;AACXC,EAAAA,YADW,8BAC6B;AAAA,QAA1BC,MAA0B,QAA1BA,MAA0B;AAAA,QAAlBC,KAAkB,QAAlBA,KAAkB;AAAA,QAAXC,QAAW,QAAXA,QAAW;AACpC,WAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAa;AAC5BR,MAAAA,KAAK,CAACS,GAAN,WAAaJ,KAAK,CAACK,GAAnB,eACKC,IADL,CACU,UAAAC,QAAQ,EAAI;AACdJ,QAAAA,OAAO,CAACI,QAAD,CAAP;AACAR,QAAAA,MAAM,CAACF,KAAK,CAACW,sBAAP,EAA+BD,QAAQ,CAACE,IAAT,CAAcC,IAA7C,CAAN;AACAX,QAAAA,MAAM,CAACF,KAAK,CAACc,eAAP,EAAwBJ,QAAQ,CAACE,IAAT,CAAcG,UAAtC,CAAN;AACAX,QAAAA,QAAQ,CAAC,kBAAD,CAAR;AACH,OANL;AAOH,KARM,CAAP;AASH,GAXU;AAYXY,EAAAA,SAZW,4BAYgB;AAAA,QAAhBd,MAAgB,SAAhBA,MAAgB;AAAA,QAARC,KAAQ,SAARA,KAAQ;AACvB,WAAO,IAAIE,OAAJ,CAAY,UAACC,OAAD,EAAa;AAC5BR,MAAAA,KAAK,CAACS,GAAN,WAAaJ,KAAK,CAACK,GAAnB,sCAAkDL,KAAK,CAACc,KAAxD,GACKR,IADL,CACU,UAAAC,QAAQ,EAAI;AACdJ,QAAAA,OAAO,CAACI,QAAD,CAAP;AACAR,QAAAA,MAAM,CAACF,KAAK,CAACkB,cAAP,EAAuBR,QAAQ,CAACE,IAAhC,CAAN;AACH,OAJL;AAKH,KANM,CAAP;AAOH,GApBU;AAqBXO,EAAAA,oBArBW,uCAqB2B;AAAA,QAAhBjB,MAAgB,SAAhBA,MAAgB;AAAA,QAARC,KAAQ,SAARA,KAAQ;AAClC,WAAO,IAAIE,OAAJ,CAAY,UAACC,OAAD,EAAa;AAC5BR,MAAAA,KAAK,CAACS,GAAN,WAAaJ,KAAK,CAACK,GAAnB,qCAAiDL,KAAK,CAACc,KAAvD,GACKR,IADL,CACU,UAAAC,QAAQ,EAAI;AACdJ,QAAAA,OAAO,CAACI,QAAD,CAAP;AACAR,QAAAA,MAAM,CAACF,KAAK,CAACoB,0BAAP,EAAmCV,QAAQ,CAACE,IAA5C,CAAN;AACH,OAJL;AAKH,KANM,CAAP;AAOH,GA7BU;AA8BXS,EAAAA,oBA9BW,uCA8B2B;AAAA,QAAhBnB,MAAgB,SAAhBA,MAAgB;AAAA,QAARC,KAAQ,SAARA,KAAQ;AAClC,WAAO,IAAIE,OAAJ,CAAY,UAACC,OAAD,EAAa;AAC5BR,MAAAA,KAAK,CAACS,GAAN,WAAaJ,KAAK,CAACK,GAAnB,qCAAiDL,KAAK,CAACc,KAAvD,GACKR,IADL,CACU,UAAAC,QAAQ,EAAI;AACdJ,QAAAA,OAAO,CAACI,QAAD,CAAP;AACAR,QAAAA,MAAM,CAACF,KAAK,CAACsB,0BAAP,EAAmCZ,QAAQ,CAACE,IAA5C,CAAN;AACH,OAJL;AAKH,KANM,CAAP;AAOH,GAtCU;AAuCXW,EAAAA,yBAvCW,4CAuCgC;AAAA,QAAhBrB,MAAgB,SAAhBA,MAAgB;AAAA,QAARC,KAAQ,SAARA,KAAQ;AACvC,WAAO,IAAIE,OAAJ,CAAY,UAACC,OAAD,EAAa;AAC5BR,MAAAA,KAAK,CAACS,GAAN,WAAaJ,KAAK,CAACK,GAAnB,0CAAsDL,KAAK,CAACc,KAA5D,GACKR,IADL,CACU,UAAAC,QAAQ,EAAI;AACdJ,QAAAA,OAAO,CAACI,QAAD,CAAP;AACAR,QAAAA,MAAM,CAACF,KAAK,CAACwB,+BAAP,EAAwCd,QAAQ,CAACE,IAAjD,CAAN;AACH,OAJL;AAKH,KANM,CAAP;AAOH,GA/CU;AAgDXa,EAAAA,cAhDW,iCAgDqB;AAAA,QAAhBvB,MAAgB,SAAhBA,MAAgB;AAAA,QAARC,KAAQ,SAARA,KAAQ;AAC5B,WAAO,IAAIE,OAAJ,CAAY,UAACC,OAAD,EAAUoB,MAAV,EAAqB;AACpC,UAAMC,IAAI,GAAGxB,KAAK,CAACyB,eAAN,GAAwB,OAAxB,GAAkC,EAA/C;AACI9B,MAAAA,KAAK,CAACS,GAAN,WAAaJ,KAAK,CAACK,GAAnB,mBAA+BmB,IAA/B,oBAA6CxB,KAAK,CAACc,KAAnD,GACKR,IADL,CACU,UAAAC,QAAQ,EAAI;AACdJ,QAAAA,OAAO,CAACI,QAAQ,CAACE,IAAV,CAAP;AACAV,QAAAA,MAAM,CAACF,KAAK,CAAC6B,eAAP,EAAwBnB,QAAQ,CAACE,IAAjC,CAAN;AACH,OAJL,EAKKkB,KALL,CAMQ,UAAAC,KAAK;AAAA,eAAIL,MAAM,CAACK,KAAD,CAAV;AAAA,OANb;AAQP,KAVM,CAAP;AAWH,GA5DU;AA6DXC,EAAAA,cA7DW,iCA6DqB;AAAA,QAAhB9B,MAAgB,SAAhBA,MAAgB;AAAA,QAARC,KAAQ,SAARA,KAAQ;AAC5B,WAAO,IAAIE,OAAJ,CAAY,UAACC,OAAD,EAAUoB,MAAV,EAAqB;AACpC,UAAMC,IAAI,GAAGxB,KAAK,CAACyB,eAAN,GAAwB,OAAxB,GAAkC,EAA/C;AACA9B,MAAAA,KAAK,CAACS,GAAN,WAAaJ,KAAK,CAACK,GAAnB,mBAA+BmB,IAA/B,oBAA6CxB,KAAK,CAACc,KAAnD,GACKR,IADL,CACU,UAAAC,QAAQ,EAAI;AACdJ,QAAAA,OAAO,CAACI,QAAQ,CAACE,IAAV,CAAP;AACAV,QAAAA,MAAM,CAACF,KAAK,CAACiC,eAAP,EAAwBvB,QAAQ,CAACE,IAAjC,CAAN;AACH,OAJL,EAKKkB,KALL,CAMQ,UAAAC,KAAK;AAAA,eAAIL,MAAM,CAACK,KAAD,CAAV;AAAA,OANb;AAQH,KAVM,CAAP;AAWH,GAzEU;AA0EXG,EAAAA,mBA1EW,sCA0E0B;AAAA,QAAhBhC,MAAgB,SAAhBA,MAAgB;AAAA,QAARC,KAAQ,SAARA,KAAQ;AACjC,WAAO,IAAIE,OAAJ,CAAY,UAACC,OAAD,EAAUoB,MAAV,EAAqB;AACpC,UAAMC,IAAI,GAAGxB,KAAK,CAACyB,eAAN,GAAwB,OAAxB,GAAkC,EAA/C;AACA9B,MAAAA,KAAK,CAACS,GAAN,WAAaJ,KAAK,CAACK,GAAnB,wBAAoCmB,IAApC,oBAAkDxB,KAAK,CAACc,KAAxD,GACKR,IADL,CACU,UAAAC,QAAQ,EAAI;AACdJ,QAAAA,OAAO,CAACI,QAAQ,CAACE,IAAV,CAAP;AACAV,QAAAA,MAAM,CAACF,KAAK,CAACmC,oBAAP,EAA6BzB,QAAQ,CAACE,IAAtC,CAAN;AACH,OAJL,EAKKkB,KALL,CAMQ,UAAAC,KAAK;AAAA,eAAIL,MAAM,CAACK,KAAD,CAAV;AAAA,OANb;AAQH,KAVM,CAAP;AAWH,GAtFU;AAuFXK,EAAAA,oBAvFW,uCAuF2B;AAAA,QAAhBlC,MAAgB,SAAhBA,MAAgB;AAAA,QAARC,KAAQ,SAARA,KAAQ;AAClC,WAAO,IAAIE,OAAJ,CAAY,UAACC,OAAD,EAAUoB,MAAV,EAAqB;AACpC5B,MAAAA,KAAK,CAACS,GAAN,WAAaJ,KAAK,CAACK,GAAnB,0BAAsCL,KAAK,CAACc,KAA5C,GAAqDR,IAArD,CACI,UAAAC,QAAQ,EAAI;AACRJ,QAAAA,OAAO,CAACI,QAAQ,CAACE,IAAV,CAAP;;AACA,YAAIF,QAAQ,CAACE,IAAT,CAAcyB,eAAd,KAAkClC,KAAK,CAACmC,qBAA5C,EAAmE;AAC/DpC,UAAAA,MAAM,CAACF,KAAK,CAACuC,gBAAP,EAAyBpC,KAAK,CAACqC,MAAN,GAAe,CAAxC,CAAN;AACH,SAFD,MAGK;AACDtC,UAAAA,MAAM,CAACF,KAAK,CAACuC,gBAAP,EAAyB,CAAzB,CAAN;AACH;;AACDrC,QAAAA,MAAM,CAACF,KAAK,CAACyC,oBAAP,EAA6B/B,QAAQ,CAACE,IAAT,CAAc8B,SAA3C,CAAN;AACAxC,QAAAA,MAAM,CAACF,KAAK,CAAC2C,0BAAP,EAAmCjC,QAAQ,CAACE,IAAT,CAAcyB,eAAjD,CAAN;AACH,OAXL,EAYKP,KAZL,CAaQ,UAAAC,KAAK;AAAA,eAAIL,MAAM,CAACK,KAAD,CAAV;AAAA,OAbb;AAeH,KAhBM,CAAP;AAiBH,GAzGU;AA0GXa,EAAAA,gBA1GW,oCA0GkB;AAAA,QAAXxC,QAAW,UAAXA,QAAW;AACzB,WAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAa;AAC5BF,MAAAA,QAAQ,CAAC,sBAAD,CAAR;AACAA,MAAAA,QAAQ,CAAC,sBAAD,CAAR;AACAA,MAAAA,QAAQ,CAAC,gBAAD,CAAR;AACAA,MAAAA,QAAQ,CAAC,WAAD,CAAR;AACAA,MAAAA,QAAQ,CAAC,sBAAD,CAAR;AACAA,MAAAA,QAAQ,CAAC,gBAAD,CAAR;AACAA,MAAAA,QAAQ,CAAC,2BAAD,CAAR;AACAA,MAAAA,QAAQ,CAAC,qBAAD,CAAR;AACAE,MAAAA,OAAO;AACV,KAVM,CAAP;AAWH,GAtHU;AAuHXuC,EAAAA,kBAvHW,sCAuH4B5B,KAvH5B,EAuHmC;AAAA,QAA1Bb,QAA0B,UAA1BA,QAA0B;AAAA,QAAhBF,MAAgB,UAAhBA,MAAgB;AAC1C,WAAO,IAAIG,OAAJ,CAAY,UAACC,OAAD,EAAa;AAC5BA,MAAAA,OAAO;AACPJ,MAAAA,MAAM,CAACF,KAAK,CAACc,eAAP,EAAwBG,KAAxB,CAAN;AACAb,MAAAA,QAAQ,CAAC,kBAAD,CAAR;AACH,KAJM,CAAP;AAKH,GA7HU;AA8HX0C,EAAAA,gBA9HW,oCA8H0C;AAAA,QAAnC3C,KAAmC,UAAnCA,KAAmC;AAAA,QAA5BC,QAA4B,UAA5BA,QAA4B;AAAA,QAAlBF,MAAkB,UAAlBA,MAAkB;AAAA,QAAV6C,OAAU,UAAVA,OAAU;AACjD7C,IAAAA,MAAM,CAACF,KAAK,CAACgD,gBAAP,CAAN;AACA5C,IAAAA,QAAQ,CAAC,kBAAD,CAAR;AAEA,QAAM6C,OAAO,GAAGC,WAAW,CAAC,YAAY;AACpC9C,MAAAA,QAAQ,CAAC,sBAAD,CAAR;AACH,KAF2B,CAE1B+C,IAF0B,CAErB,IAFqB,CAAD,EAEbhD,KAAK,CAACiD,gBAFO,CAA3B;AAGAlD,IAAAA,MAAM,CAACF,KAAK,CAACqD,kBAAP,EAA2BJ,OAA3B,CAAN;;AAEA,QAAI9C,KAAK,CAACmD,KAAN,KAAgBtD,KAAK,CAACuD,UAA1B,EAAsC;AAClC,UAAMC,OAAO,GAAGN,WAAW,CAAC,YAAY;AACpC9C,QAAAA,QAAQ,CAAC,WAAD,CAAR;AACAA,QAAAA,QAAQ,CAAC,gBAAD,CAAR;AACH,OAH2B,CAG1B+C,IAH0B,CAGrB,IAHqB,CAAD,EAGbhD,KAAK,CAACiD,gBAHO,CAA3B;AAIAlD,MAAAA,MAAM,CAACF,KAAK,CAACyD,kBAAP,EAA2BD,OAA3B,CAAN;AACH;;AAED,QAAIrD,KAAK,CAACmD,KAAN,KAAgBtD,KAAK,CAAC0D,WAAtB,IACGvD,KAAK,CAACmD,KAAN,KAAgBtD,KAAK,CAAC2D,eADzB,IAEGxD,KAAK,CAACmD,KAAN,KAAgBtD,KAAK,CAAC4D,iBAF7B,EAEgD;AAC5C,UAAMC,QAAQ,GAAGX,WAAW,CAAC,YAAY;AACrC9C,QAAAA,QAAQ,CAAC,sBAAD,CAAR;AACAA,QAAAA,QAAQ,CAAC,WAAD,CAAR;AACAA,QAAAA,QAAQ,CAAC,gBAAD,CAAR;AACH,OAJ4B,CAI3B+C,IAJ2B,CAItB,IAJsB,CAAD,EAIdhD,KAAK,CAACiD,gBAJQ,CAA5B;AAKAlD,MAAAA,MAAM,CAACF,KAAK,CAAC8D,mBAAP,EAA4BD,QAA5B,CAAN;AACH;;AAED,QAAI1D,KAAK,CAACmD,KAAN,KAAgBtD,KAAK,CAAC+D,eAA1B,EAA2C;AACvC,UAAMC,YAAY,GAAGd,WAAW,CAAC,YAAY;AACzC9C,QAAAA,QAAQ,CAAC,gBAAD,CAAR;AACAA,QAAAA,QAAQ,CAAC,sBAAD,CAAR;AACAA,QAAAA,QAAQ,CAAC,gBAAD,CAAR;AACAA,QAAAA,QAAQ,CAAC,sBAAD,CAAR;AACH,OALgC,CAK/B+C,IAL+B,CAK1B,IAL0B,CAAD,EAKlBhD,KAAK,CAACiD,gBALY,CAAhC;AAMAlD,MAAAA,MAAM,CAACF,KAAK,CAACiE,yBAAP,EAAkCD,YAAlC,CAAN;AACH;;AAED,QAAI7D,KAAK,CAACmD,KAAN,KAAgBtD,KAAK,CAACkE,WAA1B,EAAuC;AACnC,UAAMC,QAAQ,GAAGjB,WAAW,CAAC,YAAY;AACrC9C,QAAAA,QAAQ,CAAC,sBAAD,CAAR;AACAA,QAAAA,QAAQ,CAAC,gBAAD,CAAR;AACH,OAH4B,CAG3B+C,IAH2B,CAGtB,IAHsB,CAAD,EAGdhD,KAAK,CAACiD,gBAHQ,CAA5B;AAIAlD,MAAAA,MAAM,CAACF,KAAK,CAACoE,mBAAP,EAA4BD,QAA5B,CAAN;AACH;;AAED,QAAIhE,KAAK,CAACmD,KAAN,KAAgBtD,KAAK,CAACqE,gBAA1B,EAA4C;AACxC,UAAMC,aAAa,GAAGpB,WAAW,CAAC,YAAY;AAC1C9C,QAAAA,QAAQ,CAAC,qBAAD,CAAR;AACH,OAFiC,CAEhC+C,IAFgC,CAE3B,IAF2B,CAAD,EAEnBhD,KAAK,CAACiD,gBAFa,CAAjC;AAGAlD,MAAAA,MAAM,CAACF,KAAK,CAACuE,wBAAP,EAAiCD,aAAjC,CAAN;AACH;;AAED,QAAInE,KAAK,CAACqE,cAAV,EAA0B;AACtB,UAAMC,cAAc,GAAGvB,WAAW,CAAC,YAAY;AAC3C,YAAMjC,KAAK,GAAGd,KAAK,CAACc,KAApB;;AACA,YAAIA,KAAK,KAAK,CAAV,IAAe,CAAC8B,OAAO,CAAC2B,eAA5B,EAA6C;AACzCtE,UAAAA,QAAQ,CAAC,oBAAD,EAAuB,CAAvB,CAAR;AACH,SAFD,MAGK,IAAIa,KAAK,KAAK,CAAV,IAAe,CAAC8B,OAAO,CAAC2B,eAA5B,EAA6C;AAC9CtE,UAAAA,QAAQ,CAAC,oBAAD,EAAuB,CAAvB,CAAR;AACH;AACJ,OARkC,CAQjC+C,IARiC,CAQ5B,IAR4B,CAAD,EAQpBhD,KAAK,CAACiD,gBAAN,GAAyB,CARL,CAAlC;AASAlD,MAAAA,MAAM,CAACF,KAAK,CAAC2E,yBAAP,EAAkCF,cAAlC,CAAN;AACH;;AAED,QAAItE,KAAK,CAACyE,SAAN,IAAmBzE,KAAK,CAACmD,KAAN,KAAgBtD,KAAK,CAAC6E,kBAA7C,EAAiE;AAC7D,UAAMC,QAAQ,GAAG5B,WAAW,CAAC,YAAY;AACrC,YAAMI,KAAK,GAAGnD,KAAK,CAACmD,KAApB;;AACA,YAAIA,KAAK,KAAKtD,KAAK,CAAC0D,WAAhB,IAA+B,CAACX,OAAO,CAAC2B,eAA5C,EAA6D;AACzD3E,UAAAA,MAAM,CAACgF,IAAP,CAAY;AAACC,YAAAA,IAAI,EAAEhF,KAAK,CAACkE;AAAb,WAAZ;AACH,SAFD,MAGK,IAAIZ,KAAK,KAAKtD,KAAK,CAACkE,WAAhB,IAA+B,CAACnB,OAAO,CAAC2B,eAA5C,EAA6D;AAC9D3E,UAAAA,MAAM,CAACgF,IAAP,CAAY;AAACC,YAAAA,IAAI,EAAEhF,KAAK,CAACqE;AAAb,WAAZ;AACH,SAFI,MAGA,IAAIf,KAAK,KAAKtD,KAAK,CAACqE,gBAAhB,IAAoC,CAACtB,OAAO,CAAC2B,eAAjD,EAAkE;AACnE3E,UAAAA,MAAM,CAACgF,IAAP,CAAY;AAACC,YAAAA,IAAI,EAAEhF,KAAK,CAAC0D;AAAb,WAAZ;AACH;AACJ,OAX4B,CAW3BP,IAX2B,CAWtB,IAXsB,CAAD,EAWdhD,KAAK,CAACiD,gBAAN,GAAyB,CAXX,CAA5B;AAYAlD,MAAAA,MAAM,CAACF,KAAK,CAACiF,mBAAP,EAA4BH,QAA5B,CAAN;AACH;AACJ;AA/MU,CAAf","sourcesContent":["import axios from \"axios\";\r\nimport router from '../router';\r\nimport * as tipos from \"../store/mutationtypes\"\r\n\r\nexport default {\r\n    obterEleicao({commit, state, dispatch}) {\r\n        return new Promise((resolve) => {\r\n            axios.get(`${state.url}/eleicao`)\r\n                .then(response => {\r\n                    resolve(response);\r\n                    commit(tipos.ATUALIZAR_NOME_ELEICAO, response.data.nome);\r\n                    commit(tipos.ATUALIZAR_ETAPA, response.data.etapaAtual);\r\n                    dispatch('inicializarDados')\r\n                });\r\n        });\r\n    },\r\n    obterFila({commit, state}) {\r\n        return new Promise((resolve) => {\r\n            axios.get(`${state.url}/estat-conferencia?etapa=${state.etapa}`)\r\n                .then(response => {\r\n                    resolve(response);\r\n                    commit(tipos.ATUALIZAR_FILA, response.data);\r\n                });\r\n        });\r\n    },\r\n    obterAndamentosZonas({commit, state}) {\r\n        return new Promise((resolve) => {\r\n            axios.get(`${state.url}/andamentos-zonas?etapa=${state.etapa}`)\r\n                .then(response => {\r\n                    resolve(response);\r\n                    commit(tipos.ATUALIZAR_ANDAMENTOS_ZONAS, response.data);\r\n                });\r\n        });\r\n    },\r\n    obterAndamentosPolos({commit, state}) {\r\n        return new Promise((resolve) => {\r\n            axios.get(`${state.url}/andamentos-polos?etapa=${state.etapa}`)\r\n                .then(response => {\r\n                    resolve(response);\r\n                    commit(tipos.ATUALIZAR_ANDAMENTOS_POLOS, response.data);\r\n                });\r\n        });\r\n    },\r\n    obterAndamentosMunicipios({commit, state}) {\r\n        return new Promise((resolve) => {\r\n            axios.get(`${state.url}/andamentos-municipios?etapa=${state.etapa}`)\r\n                .then(response => {\r\n                    resolve(response);\r\n                    commit(tipos.ATUALIZAR_ANDAMENTOS_MUNICIPIOS, response.data);\r\n                });\r\n        });\r\n    },\r\n    obterZonasRest({commit, state}) {\r\n        return new Promise((resolve, reject) => {\r\n            const fake = state.testeAndamentos ? '-fake' : ''\r\n                axios.get(`${state.url}/zonas${fake}?etapa=${state.etapa}`)\r\n                    .then(response => {\r\n                        resolve(response.data);\r\n                        commit(tipos.ATUALIZAR_ZONAS, response.data);\r\n                    })\r\n                    .catch(\r\n                        error => reject(error)\r\n                    )\r\n        })\r\n    },\r\n    obterPolosRest({commit, state}) {\r\n        return new Promise((resolve, reject) => {\r\n            const fake = state.testeAndamentos ? '-fake' : ''\r\n            axios.get(`${state.url}/polos${fake}?etapa=${state.etapa}`)\r\n                .then(response => {\r\n                    resolve(response.data);\r\n                    commit(tipos.ATUALIZAR_POLOS, response.data);\r\n                })\r\n                .catch(\r\n                    error => reject(error)\r\n                )\r\n        })\r\n    },\r\n    obterMunicipiosRest({commit, state}) {\r\n        return new Promise((resolve, reject) => {\r\n            const fake = state.testeAndamentos ? '-fake' : ''\r\n            axios.get(`${state.url}/municipios${fake}?etapa=${state.etapa}`)\r\n                .then(response => {\r\n                    resolve(response.data);\r\n                    commit(tipos.ATUALIZAR_MUNICIPIOS, response.data);\r\n                })\r\n                .catch(\r\n                    error => reject(error)\r\n                )\r\n        })\r\n    },\r\n    obterDataAtualizacao({commit, state}) {\r\n        return new Promise((resolve, reject) => {\r\n            axios.get(`${state.url}/etapa?etapa=${state.etapa}`).then(\r\n                response => {\r\n                    resolve(response.data);\r\n                    if (response.data.dataAtualizacao === state.dataUltimaAtualizacao) {\r\n                        commit(tipos.ATUALIZAR_CICLOS, state.ciclos + 1);\r\n                    }\r\n                    else {\r\n                        commit(tipos.ATUALIZAR_CICLOS, 0);\r\n                    }\r\n                    commit(tipos.ATUALIZAR_NOME_ETAPA, response.data.descricao);\r\n                    commit(tipos.ATUALIZAR_DATA_ATUALIZACAO, response.data.dataAtualizacao);\r\n                })\r\n                .catch(\r\n                    error => reject(error)\r\n                )\r\n        })\r\n    },\r\n    inicializarDados({dispatch}) {\r\n        return new Promise((resolve) => {\r\n            dispatch('obterDataAtualizacao');\r\n            dispatch('obterAndamentosZonas');\r\n            dispatch('obterZonasRest');\r\n            dispatch('obterFila');\r\n            dispatch('obterAndamentosPolos');\r\n            dispatch('obterPolosRest');\r\n            dispatch('obterAndamentosMunicipios');\r\n            dispatch('obterMunicipiosRest');\r\n            resolve();\r\n        })\r\n    },\r\n    atualizarEtapaRest({dispatch, commit}, etapa) {\r\n        return new Promise((resolve) => {\r\n            resolve();\r\n            commit(tipos.ATUALIZAR_ETAPA, etapa);\r\n            dispatch('atualizarPolling');\r\n        })\r\n    },\r\n    atualizarPolling({state, dispatch, commit, getters}) {\r\n        commit(tipos.ZERAR_INTERVALOS);\r\n        dispatch('inicializarDados');\r\n\r\n        const intData = setInterval(function () {\r\n            dispatch('obterDataAtualizacao');\r\n        }.bind(this), state.tempoAtualizacao);\r\n        commit(tipos.ATUALIZAR_INT_DATA, intData);\r\n\r\n        if (state.visao === tipos.VISAO_FILA) {\r\n            const intFila = setInterval(function () {\r\n                dispatch('obterFila');\r\n                dispatch('obterZonasRest');\r\n            }.bind(this), state.tempoAtualizacao);\r\n            commit(tipos.ATUALIZAR_INT_FILA, intFila);\r\n        }\r\n\r\n        if (state.visao === tipos.VISAO_ZONAS\r\n            || state.visao === tipos.VISAO_ZONASFILA\r\n            || state.visao === tipos.VISAO_CONFERENCIA) {\r\n            const intZonas = setInterval(function () {\r\n                dispatch('obterAndamentosZonas');\r\n                dispatch('obterFila');\r\n                dispatch('obterZonasRest');\r\n            }.bind(this), state.tempoAtualizacao);\r\n            commit(tipos.ATUALIZAR_INT_ZONAS, intZonas)\r\n        }\r\n\r\n        if (state.visao === tipos.VISAO_ZONASPOLO) {\r\n            const intZonasPolo = setInterval(function () {\r\n                dispatch('obterZonasRest');\r\n                dispatch('obterAndamentosZonas');\r\n                dispatch('obterPolosRest');\r\n                dispatch('obterAndamentosPolos');\r\n            }.bind(this), state.tempoAtualizacao);\r\n            commit(tipos.ATUALIZAR_INT_ZONAS_POLOS, intZonasPolo)\r\n        }\r\n\r\n        if (state.visao === tipos.VISAO_POLOS) {\r\n            const intPolos = setInterval(function () {\r\n                dispatch('obterAndamentosPolos');\r\n                dispatch('obterPolosRest');\r\n            }.bind(this), state.tempoAtualizacao);\r\n            commit(tipos.ATUALIZAR_INT_POLOS, intPolos);\r\n        }\r\n\r\n        if (state.visao === tipos.VISAO_MUNICIPIOS) {\r\n            const intMunicipios = setInterval(function () {\r\n                dispatch('obterMunicipiosRest');\r\n            }.bind(this), state.tempoAtualizacao);\r\n            commit(tipos.ATUALIZAR_INT_MUNICIPIOS, intMunicipios);\r\n        }\r\n\r\n        if (state.alternarEtapas) {\r\n            const intAlternancia = setInterval(function () {\r\n                const etapa = state.etapa;\r\n                if (etapa === 1 && !getters.getModalExibido) {\r\n                    dispatch('atualizarEtapaRest', 2);\r\n                }\r\n                else if (etapa === 2 && !getters.getModalExibido) {\r\n                    dispatch('atualizarEtapaRest', 1);\r\n                }\r\n            }.bind(this), state.tempoAtualizacao * 2);\r\n            commit(tipos.ATUALIZAR_INT_ALTERNANCIA, intAlternancia)\r\n        }\r\n\r\n        if (state.modoTelao && state.visao !== tipos.VISAO_CONFIGURACAO) {\r\n            const intTelao = setInterval(function () {\r\n                const visao = state.visao;\r\n                if (visao === tipos.VISAO_ZONAS && !getters.getModalExibido) {\r\n                    router.push({name: tipos.VISAO_POLOS});\r\n                }\r\n                else if (visao === tipos.VISAO_POLOS && !getters.getModalExibido) {\r\n                    router.push({name: tipos.VISAO_MUNICIPIOS});\r\n                }\r\n                else if (visao === tipos.VISAO_MUNICIPIOS && !getters.getModalExibido) {\r\n                    router.push({name: tipos.VISAO_ZONAS});\r\n                }\r\n            }.bind(this), state.tempoAtualizacao * 2);\r\n            commit(tipos.ATUALIZAR_INT_TELAO, intTelao)\r\n        }\r\n    }\r\n}"]}]}